---
title: 常见问题记录
tags:
---

## 服务器相关

###### 问题描述:
winrar外工具在win下压缩文件,在linux下打开后出现乱码
###### 原因：
由于zip在压缩时并没有指定编码格式，Windows下生成的zip文件中的编码是GBK/GB2312等，而Linux下的默认编码是UTF8因此，导致这些zip文件在Linux下解压时出现中文乱码问题。
###### 解决方案:
1. 使用7zip解压,或者使用winrar压缩.
2. 解决的方法是 加上CP936选项，这里的CP936,有些人可能不明白，其实最早的GBK编码，就是IBM定制的MBCS字符集，汉子编码正好在整个字符集中的936页，因此好多地方其实都是用CP936来代表GBK
``` bash
unzip -O CP936 xxx.zip
```

## Linux

###### 问题描述 
virtualbox下安装linux后进入EFI Shell,无法进入系统
###### 原因：
EFI/boot/bootx64.efi 这个文件夹是 VirtualBox 的默认文件夹，如果正常启动没有找到或者识别，就会自动选用这个。
###### 解决方案:
1. 直接在UEFI shell界面操作，找到grubx64.efi,直接运行进入系统
2. 将grubx64.efi复制到wirtualbox默认文件夹
``` bash
mkdir \EFI\boot
cp \EFI\grub\grubx64.efi \EFI\boot\bootx64.efi
```


## windows

###### 问题描述 
cmd返回中文错误信息乱码
###### 原因：
中文默认编码为GBK,cmd中返回的中文内容为其它编码格式
###### 解决方案:
1. 在cmd中输入CHCP 650001 (65001为utf-8对应的编码)
2. 如果显示依然为乱码则需要在cmd属性中将字体修改为 "Lucida Console"
3. 常用的编码: 
    * 936 GBK(一般情况下为默认编码) 
    * 437 美国英语 
    * 65001 utf-8
``` cmd
CHCP 65001
```

## java

###### 问题描述 
java中使用replace替换字符串中的\及\ \
###### 原因：
\常用作转码,故不能直接使用\进行替换
###### 解决方案:
使用\ \ \ \进行对\的替换,使用\ \ \ \ \ \ \ \进行\ \的替换
``` java
String str="abc\def"
str.replaceAll("\\\\","");
str="abc\\def"
str.replaceAll("\\\\\\\\","");
```

###### 问题描述
json转义问题（消除反斜杠及{}外面多余的"）,接口交互过程中,接收到的JSON串中包含多余的\和"
###### 原因：
map等其他类型把String类型的值转成json的容易在{}外面有引号，会导致转换出错,如:使用fastjson的Json.toJsonString()方法
###### 解决方案:
根据实际情况,有多种解决方案
1. 使用replace去掉多余的\,因为可能存在作为转译使用的\,替换时需要替换\ \,保留转译用的\
2. 使用common-lang或goovy中的StringEscapeUtils.unescapeJavaScript()方法进行删除\操作,但是对于{}对象,可能会存在嵌套""的情况发生,此时还需要对{}外的""进行替换处理
``` java
//先去除多余的转义符号
json = StringEscapeUtils.unescapeJavaScript(json);
//去掉{}两边的引号{}需要\\进行转义，"需要\进行转义
json=json.replaceAll("\"\\{", "\\{");
json=json.replaceAll("\\}\"", "\\}");
return json;
```

